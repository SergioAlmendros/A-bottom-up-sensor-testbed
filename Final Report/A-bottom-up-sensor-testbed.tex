\documentclass[12pt, a4paper,twoside]{tesi_upf}
\usepackage{pgfgantt}

%CODIFICACIÓ
\usepackage[latin1]{inputenc}


%IDIOMES
\usepackage[catalan,english]{babel}

%NOMÉS PER A OBTENIR INDICACIÓ DEL MARC EN MIDA A4
\usepackage[cam,a4,center,frame]{crop}

%PER A INCLOURE GRÀFICS I EL LOGO DE LA UPF
\usepackage{graphicx}
\usepackage{caption}
\usepackage{acronym}
\usepackage{multirow}
%FONTS TIMES O GARAMOND, 
\usepackage{times}
%\usepackage{garamond}
\usepackage{url}

\usepackage{pdfpages}
%SENSE HEADINGS: NO MODIFICAR
\pagestyle{plain}

%PER A L'ÍNDEX DE MATÈRIES
\usepackage{makeidx}
\makeindex

%ESTIL DE BIBLIOGRAFIA
\bibliographystyle{apalike}


%AQUEST DOCUMENT ÉS EN CATALÀ
\selectlanguage{english}

%EN COMPTES DE ÍNDEX, LA TAULA DE CONTINGUTS ES TITULA SUMARI
\addto\captionscatalan
  {\renewcommand{\contentsname}{\Large \sffamily Sumari}}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~
% CUSTOM PACKAGES
% ~~~~~~~~~~~~~~~~~~~~~~~~~~
\usepackage{hyperref}
\usepackage{titlesec}
\setcounter{secnumdepth}{4}
\usepackage{pdfpages}

%AFEGIU EN AQUESTA PART LES VOSTRES DADES
\title{A bottom up sensor testbed}
\author{Sergio Almendros Díaz}
\thyear{2013}
\department{Departament de Tecnologies de la Informació i les Comunicacions (DTIC)}
\supervisor{Jaume Barceló}


\begin{document}

\pdfstringdefDisableCommands{%
\let\MakeUppercase\relax
}

\frontmatter

\maketitle

\cleardoublepage


%%%%%% Dedicatòria; si no es vol posar, comenteu fins a final de dedicatòria

\noindent Dedicatòria

\cleardoublepage

%%%%%% Final de dedicatòria


%%%%%% Agraïments; si no es vol posar, comenteu fins a final de agraïments
\noindent {\Large \sffamily Acknowledgments}
\\[12pt] 
 
Acknowledgments

\cleardoublepage

%%%%%% Final dels agraïments

%ABSTRACT EN DOS IDIOMES. COM A MÍNIM CATALÀ. SI L'ALTRE ÉS EN CASTELLA CANVIEU EL QUE POSA ABSTRACT
\selectlanguage{english}
\section*{\Large \sffamily Abstract}

A bottom up sensor testbed is a sensor platform which collect sensory data. In this thesis we will develop a sensor platform that can be attached to guifi nodes to gather and share sensory data throught the guifi network and opencities.
Guifi is an open network built to everyone can join it providing his own connection and opencities is a platform developed in UPF which allows any user to upload and download sensory data.\\
For the guifi nodes we will use an Arduino YUN (Arduino is an open-source electronics prototyping platform) which will gathered the sensory data and send it to opencities, then an Android application will get and visualize this data.
\\
This solution will show how to create a sensor platform and see the result very quickly which could help to other developers build their own platform to share sensory data.


\selectlanguage{catalan}
\vspace*{\fill}
\section*{\Large \sffamily  Resum}

Un banc de proves de sensors de baix a dalt és una plataforma de sensors que recull dades de sensors. En aquesta tesi es desenvoluparà una plataforma de sensors que es pot conectar a nodes guifi per recopilar i compartir dades de sensors a través de la xarxa guifi i opencities. 
Guifi és una xarxa oberta construïda per a tothom pot unir-se a ella proporcionant la seva pròpia connexió i opencities és una plataforma desenvolupada a la UPF, que permet a qualsevol usuari pujar i descarregar dades sensorials. \\ 
Per als nodes guifi utilitzarem un Arduino YUN (Arduino és una plataforma de creació de prototips electrònics de codi obert) per reunir les dades de sensors i enviar-les a openities, i a continuació, una aplicació per Android descarregarà i visualitzarà aquestes dades. 
\\
Aquesta solució mostrarà com crear una plataforma de sensors i veure el resultat molt ràpid, el que podria ajudar a altres desenvolupadors a construir la seva pròpia plataforma per compartir dades de sensors.

\vspace*{\fill}

\selectlanguage{english}
\cleardoublepage
%FIN DE ABSTRACTE

%PREFACI OPCIONAL. SI NO ES VOL, COMENTEU FINS EL FINAL DE PREFACI
%{\bf Prefaci}
%
%\cleardoublepage
%FINAL DE PREFACI


%TAULA DE CONTINGUTS: OBLIGATÒRIA
\selectlanguage{english}
\tableofcontents

%INDEX DE FIGURES; NOMÉS ES POSA SI HI HA FIGURES
\listoffigures
%Fa que aparegui al sumari
\addcontentsline{toc}{chapter}{List of figures}

%INDEX DE TAULES; NOMÉS ES POSA SI HI HA TAULES
\listoftables
%Fa que aparegui al sumari
\addcontentsline{toc}{chapter}{List of tables}


%COMENÇA EL TEXT
\mainmatter
\chapter{Introduction}
\label{Chapter1}

The development of this project involves two parts, recollect data from sensors with the arduino and send it to opencities, there is when we will make the sensor testbed, and download the data from an Android Application to show it.

A sensor testbed is a small sensor network which has the goal to gather data, and test the technologies used as nodes to see if they are the best options to create a real one.

Bottom-up is, basically, the pattern that we used to build the sensor testbed, where the end users, in this case, guifi.net users, are the ones who have to assemble the sensor nodes and attached them to the guifi nodes to create the sensor network. With the bottom-up model, the data is provide and use by the end users, which prevents big companies or government to hide this information.
 
This project is an easy way to understand the importance of sensor networks and how they can help us to know, for example, if there is low quality air in our city, and do something about it.

As sensor nodes we will use an Arduino YUN, Arduino is an open-source electronics prototyping platform, that allows the user to obtain analog reads from a sensor very easily and, with a Power over Ethernet module, it can be attached to guifi nodes and send the sensory data to a sensor platform, like opencities. 

When the sensory data is stored, we will develop an Android application to visualize this data and make it more accessible to other users not involved with guifi.net.

In the following chapters I will explain the state of sensor networks nowadays \ref{Chapter2}, which technologies we will use \ref{Chapter3}, and how the project has been done, as well as all the problems found during the process \ref{Chapter4}. 

The final goal of the project is to build a sensor testbed and there will be the results \ref{Chapter5}, and, to finish, the conclusions \ref{Chapter6} and the future work \ref{Chapter7}.
  
\chapter{State of the Art}
\label{Chapter2}
  
  \section{Introduction}
    Sensor networks started as a mecanism of defense develop by the military during the Cold War, with acoustic sensors they try to find Soviet submarines. But, this rearch continue at universities, trying to make this sensors smaller, and with the posibility of real-time data. 
    
    Right now, the sensors are small enough, and the processors with network technology consume low energy, which allows us to deploy a test bed without bothering the people around it.
    
    Smart cities are the next step, a city capable of having real-time information, not only about the environment, it can go from the amount of cars that pass a road, to the amount of rain water in a day. This kind of information help to manage more efficiently the city.
    
    It is important to share this information, in the case that the government build the sensor network, the data should be open to everyone can see it. There are already some sensor networks functioning, some of them are from the government, and, sometimes, there are not that open about their data, but there are also some people who have sensor in his home and share their sensory data with anyone who wants to see it.

  \section{Sensor networks and smart cities}
    In this section we introduce a few projects of sensor networks that cities deployed:
    
    \subsection{Amsterdam smart city}
      Amsterdam have a lot of projects concerning the smart city concept, like the "Flexible street lighting", which allows the government to monitor the street and switch off the lights saving energy, or the "Smart parking" which let drivers to know if there are free spots to park, and, in consecuence, reduce air pollution.
      
    \subsection{Santander smart city}
      Santander has his own sensor network testbed for environmental monitoring, outdoor parking area management, or traffic intensity monitoring
    
    
  \section{Companies}
    There are some companies that are in the business of sensor networks, such as "Schneider Electric", a multinational company that produces components for energy management, or smartcitizen, a platform that allows a user to have a sensor node and share the data with everyone.

    
  \section{Opendata services}
    The sensor networks are useless if we don't store the data, although we could save it in the device, it would be too expensive to recollect it, so we chose a web opendata service, which is a website that allows the user to upload and download the data with an open API, and normally they have some way to visualize it.
    
    There are some services such as Xively, o sentilo which allows you to install it in your server, and opencities, an opendata service developed in the Pompeu Fabra University.
    
    

\chapter{Technologies}
\label{Chapter3}
  
  In this chapter we focused in the techonologies used to develop this project, which is divided in four parts: sensors, arduino, Guifi network and opencities, and Android. 

  \section{Sensors}
    A sensor is a device which transform a physical measure to an output signal that can be read by another device, such as an arduino, 
    
    In this project we will use five sensors that measured temperature, light, noise, humidity, and air quality.
    
    \subsection{LM35: Temperature}
      LM35 is a sensor with an output voltage proportional to the Centigrade temperature, the output pin goes directly to an analog pin in the arduino.
      [image]
      
    \subsection{Light Dependent Resistor (LDR)}
      The LDR is a sensor which returns high voltage if there is more luminosity, and also it connects directly to an analog pin in the arduino, but with a resistor.
      [image]
      
    \subsection{Emartee Mini Sound Sensor: Noise}
      This sensor is used to measured noise levels, which is similar to the LM35 in the connexion, the output pin goes directly to an analgo pin.
      [image]
      
    \subsection{Aosong DHT22: Humidity}
      DHT22 is a humidity and temperature sensor, although we will only use the humidity measure. The output is digital, and to read it, we use an external library already developed.
      [image]
      
    \subsection{Sharp GP2Y1010AU0F: Air Quality}
      This sensor is an optical dust sensor, and we will used to measured air quality. But because the output pins are a little bit inaccessible, it is needed an adaptor to be able to connect it to the arduino.
      [image]
  
  \section{Arduino}
    The Arduino board that we use is an arduino YUN, which has supports a Linux distribution based on OpenWRT named Linino, and it has Ethernet and wifi suport, and a micro-SD card slot, those are basically the reason why we decided to use it, as we have to store the recollected data, and send it to opencities.
    
    We also have planned to attached a power over ethernet (PoE) module because the arduino's will be attached to guifi nodes which are also PoE.
    
  \section{Python}
    Because of the low memory for the arduino sketches, we have to use a python script to communicate with opencities.
    
  \section{Guifi network and opencities}
    Guifi network is the network where the arduino's will be installed, and the one which will provide the access to the Internet and opencities.
    
    Opencities is the opendata services that we chose, the strengths of opencities are that give us free storage, a great and easy API to upload and download the data, and, also, the developers are in the UPF and problems will be solved more easily.
    
  \section{Android}
    Android is an open source mobile operating system from Google, it runs on smartphones, and we will use this OS to develop an application to see the sensory data stored in opencities, and show it to the user in a way that anybody can understand the values.
    
    This application it will be tested on a Sony Xperia Z1, with an Android 4.2.2.

\chapter{Bottom up sensor testbed}
\label{Chapter4}

  \section{Guifi nodes}
  \section{Arduino: software}
    \subsection{Collect sensory data}
    \subsection{Communication with opencities}
  \section{Android app}

\chapter{Testbed results}
\label{Chapter5}

\chapter{Conclusions}
\label{Chapter6}

\chapter{Future work}
\label{Chapter7}

\chapter{Appendixes}
\label{Chapter8}

  \section{Pilot Charter}
  \section{Documentation}


\bibliography{bibliography}
\cleardoublepage



\backmatter
\printindex





\end{document}


%NUMERACIÓ DE LA PÀGINA EXTERIOR EXCEPTE EN LA PRIMERA PÀGINA DE CADA CAPÍTOL
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyfoot{}
\fancyfoot[RO]{\thepage}
\fancyfoot[LE]{\thepage}


%MUTIPLES ÍNDEX
%En el preàmbul
\usepackage{multind}
\makeindex{authors}
%Introducció d'entrades la forma
\index{authors}{Einstein}
%Situació de l'Índex
\printindex{authors}{Author index}
%Cal eliminar les comandes \usepakage{makeidx} \makeindex \printindex
%cal exacutar des de la línia de comandes makeindex authors
